{"version":3,"sources":["../../../../src/__tests__/realWorld/cms/request.js"],"names":[],"mappings":";;;;;;;;yBAAsB,WAAW;;;;0BACV,YAAY;;;;gCACf,qBAAqB;;;;sBACtB,UAAU;;;;AAE7B,OAAO,GAAG,wBAAW,OAAO,CAAC;;AAE7B,OAAO,CAAC,SAAS,CAAC,OAAO,GAAG,YAAW;AACnC,QAAI,GAAG,GAAG,IAAI,CAAC;AACf,QAAI,KAAK,CAAC;;AAEV,WAAO,kCAAY,UAAS,OAAO,EAAE,MAAM,EAAE;AACzC,WAAG,CAAC,GAAG,CAAC,UAAS,GAAG,EAAE,GAAG,EAAE;AACvB,gBAAI,OAAO,GAAG,KAAK,WAAW,IAAI,GAAG,CAAC,MAAM,IAAI,GAAG,EAAE;AACjD,oBAAI,GAAG,GAAG,SAAS,GAAG,GAAG,CAAC,MAAM,GAAG,GAAG,GAAG,GAAG,CAAC,GAAG,GAAG,IAAI,GAAG,GAAG,CAAC,MAAM,GAAG,GAAG,CAAC;AAC3E,qBAAK,GAAG,IAAI,KAAK,CAAC,GAAG,CAAC,CAAC;AACvB,qBAAK,CAAC,MAAM,GAAG,GAAG,CAAC,MAAM,CAAC;AAC1B,qBAAK,CAAC,IAAI,GAAG,GAAG,CAAC,IAAI,CAAC;AACtB,qBAAK,CAAC,GAAG,GAAG,GAAG,CAAC;AAChB,sBAAM,CAAC,KAAK,CAAC,CAAC;aACjB,MAAM,IAAI,GAAG,EAAE;AACZ,sBAAM,CAAC,IAAI,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC;aAC1B,MAAM;AACH,uBAAO,CAAC,GAAG,CAAC,CAAC;aAChB;SACJ,CAAC,CAAC;KACN,CAAC,CAAA;CACL,CAAC;;qBAEa,gDAAiB","file":"request.js","sourcesContent":["import supertest from \"supertest\";\nimport superagent from \"superagent\";\nimport Promise from \"core-js/es6/promise\";\nimport server from \"./server\";\n\nRequest = superagent.Request;\n\nRequest.prototype.promise = function() {\n    var req = this;\n    var error;\n\n    return new Promise(function(resolve, reject) {\n        req.end(function(err, res) {\n            if (typeof res !== \"undefined\" && res.status >= 400) {\n                var msg = 'cannot ' + req.method + ' ' + req.url + ' (' + res.status + ')';\n                error = new Error(msg);\n                error.status = res.status;\n                error.body = res.body;\n                error.res = res;\n                reject(error);\n            } else if (err) {\n                reject(new Error(err));\n            } else {\n                resolve(res);\n            }\n        });\n    })\n};\n\nexport default supertest(server);"]}